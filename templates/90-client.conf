{{ ansible_managed | comment }}

#################################################
# TO SIRIUS
#################################################

$template fwdsirius, "%TIMESTAMP:::date-rfc3339% %hostname% %syslogpriority-text% %syslogfacility-text% %programname% %msg:::sp-if-no-1st-sp%%msg:::drop-last-lf%"

#Problem with transparent mode when on the same subnet, skip loadbalancer
*.* action(type="omfwd" Target={% if '10.64.32.' in ansible_default_ipv4.address %}"sirius-logs-01.prod.kosc.net"{% else %}"sirius-lb-vip.kosc.net"{% endif %} Port="514" Protocol="udp"
        template="fwdsirius"
        queue.filename="omfwdsirius" queue.spoolDirectory="/var/lib/rsyslog"
        queue.size="300000" queue.maxdiskspace="536870912"
        queue.lowwatermark="20000" queue.highwatermark="200000"
        queue.discardmark="250000" queue.type="LinkedList"
        queue.discardseverity="4"
        queue.saveonshutdown="on" queue.dequeuebatchsize="4"
)

