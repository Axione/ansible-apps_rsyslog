{{ ansible_managed | comment }}

#################################################
# FORWARD ALL TO RSYSLOG SERVER
#################################################

$template fwd_default, "%TIMESTAMP:::date-rfc3339% %hostname% %syslogpriority-text% %syslogfacility-text% %programname% %msg:::sp-if-no-1st-sp%%msg:::drop-last-lf%"

#Problem with transparent mode when on the same subnet, skip loadbalancer
*.* action(type="omfwd" Target="{{ rsyslog_target_server }}" Port="{{ rsyslog_target_port }}" Protocol="{{ rsyslog_target_proto }}"
        template="fwd_default"
        queue.filename="omfwd_queue" queue.spoolDirectory="/var/lib/rsyslog"
        queue.size="300000" queue.maxdiskspace="536870912"
        queue.lowwatermark="20000" queue.highwatermark="200000"
        queue.discardmark="250000" queue.type="LinkedList"
        queue.discardseverity="4"
        queue.saveonshutdown="on" queue.dequeuebatchsize="4"
)

